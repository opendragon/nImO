\ProvidesFile{MpMbuildingFromSource.tex}[v1.0.0]
\appendixStart[BuildingFromSource]{\textitcorr{Building \mplusm{} From Source}}
An \mplusm{} installation is normally simply installed according to the
\emph{\MMM{}~Installation} manual.
It is also possible to build a customized \mplusm{} from the source files, which can be
done if the \asCode{Developer} package has also been installed.
\secondaryStart{Prerequisites}
\tertiaryStart{General~prerequisites}
In order to successfully build all the pieces for \mplusm{}, it is important that the
latest version of the installer is run first, selecting the \asCode{Developer} package (on
\osx) of \asCode{Optional} component (on \win).
If the installer is not run, some of the optional services may fail to build, as they
depend on pieces that are outside of the \mplusm{} source code but that are installed when
\mplusm{} is installed.\\

For example, the JavaScript Filter service uses the \textbf{SpiderMonkey} engine to
support \compLang{JavaScript}-based services, but only the minimum files needed for it are
installed by default \longDash{} in order to build the JavaScript Filter service, the
header files for \textbf{SpiderMonkey}, at least, must be installed.
Other non\longDash{}core services may not build at all, since the files that they require
are not Open Source and, thus, can't be built by the end\longDash{}user, but must be
installed at some point \longDash{} which is what the distribution packages do.\\

At a minimum, the source files from the \asCode{Developer} package must be present on the
system, along with a \compLang{C++} development environment.
Note that the source files are provided as \textbf{ZIP} archive files that contain a
snapshot of the \asCode{git} repositories where the source code is stored.
\tertiaryEnd
\tertiaryStart{Prerequisites~for~\osx}
\begin{itemize}
\item\asCode{Xcode} is available from the Mac App Store and provides the
\compLang{C++} development environment for \osx{}
\item\exSp{}The \asCode{Xcode} command\longDash{}line tools must be installed, using the
command `\asCode{xcode-select {-}{-}install}'
\item\exSp{}The \asCode{ccmake} and \asCode{cmake} command\longDash{}line tools, which
can be installed using \asCode{MacPorts} or directly from the web\longDash{}page
\companyReference{http://www.cmake.org/download}{http://www.cmake.org/download}
\item\exSp{}The \asCode{autoconf213} command\longDash{}line tool, which can be installed
using \asCode{MacPorts}; note that this is only needed if \textbf{SpiderMonkey} is being
built
\item\exSp{}The \asCode{Packages} GUI tool, from
\companyReference{http://s.sudre.free.fr/Software/Packages/about.html}{St\'ephane Sudre};
this is only needed if you wish to create installer packages after building \mplusm
\end{itemize}
\tertiaryEnd
\tertiaryStart{Prerequisites~for~\win}
\begin{itemize}
\item\asCode{Visual Studio} is available from Microsoft and provides the \compLang{C++}
development environment for \win; the version used for development is
`\asCode{Visual Studio Community 2015}', but newer versions should also work
%; note that older versions are not supported with \textbf{SpiderMonkey}
\item\exSp{}The \asCode{cmake} tool, which can be installed from the web\longDash{}page
\companyReference{http://www.cmake.org/download}{http://www.cmake.org/download}
\item\exSp{}An `\asCode{unzip}' program; the free program \asCode{Stuffit Expander}, from
\companyReference{http://my.smithmicro.com/stuffit-expander-windows.html}{Smith Micro
Software}, can process the \textbf{ZIP} archive files
\item\exSp{}The \asCode{python} command\longDash{}line tool, from
\companyReference{https://www.python.org/downloads}{Python.org}; install a \textbf{2.7.x}
version, not a version \textbf{3} or newer, and make sure that the install directory for
the executable is added to the system \asCode{Path} variable
\item\exSp{}A program, such as \asCode{SourceTree}, to fetch files from `git' repositories
\item\exSp{}The Nullsoft Scriptable Install System (\asCode{NSIS}) from
\companyReference{http://nsis.sourceforge.net/Download}{NullSoft}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Prerequisites~for~\linux}
\begin{itemize}
\item The \asCode{clang} or \asCode{g++} (which includes \asCode{gcc}) \compLang{C}/
\compLang{C++} compilers
\item\exSp{}The \asCode{ccmake} and \asCode{cmake} command\longDash{}line tools
\item\exSp{}The \asCode{autoconf-2.13}, \asCode{python} and \asCode{git}
command\longDash{}line tools
\end{itemize}
The base set of tools can be obtained via the following command:\\
\asCode{apt-get install cmake git g++ clang autoconf2.13 python2.7}\\
Note that some of the tools may already be installed on the \linux{} system.
\tertiaryEnd
\secondaryEnd
\secondaryStart{Initial~Steps}
\begin{itemize}
\item Create a directory to hold the source code, where the build will be performed; we'll
refer to it from now on as `\asCode{\textbf{devel}}'
\item\exSp{}Copy the desired \textbf{ZIP} archive files from their installation location
(\asCode{/opt/m+m/src} on \osx,\\
\asCode{C:\textbackslash{}Program Files\textbackslash{}m+m\textbackslash{}src} for
\win{}) to the new directory \asCode{\textbf{devel}}; all but the files
\asCode{Core\fUS{}MPlusM.zip} and \asCode{Utilities\fUS{}mm\fUS{}manager.zip} are optional
\item\exSp\asCode{unzip} the \textbf{ZIP} archive files in the directory
\asCode{\textbf{devel}}
\item\exSp{}Rename the new directories, stripping off the `\asCode{-master}' suffix if
present
\end{itemize}
\secondaryEnd
\secondaryStart{(Optional)~Building~\textbf{ACE}}
\textbf{ACE} (The ADAPTIVE Communication Environment) provides the low\longDash{}level
networking support used within \mplusm{}; the files needed to compile and link with ACE
are installed as part of the normal \mplusm{} installation procedure, so it's not
necessary to rebuild ACE; the source code is provided in case there is an issue with the
headers or libraries.\\

Note that the file \asCode{ACE\fUS{}wrappers/ace/config.h} will select the correct
configuration file for \osx{} or \win{}, so it does not need to be modified.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{\textbf{devel}}
\item\exSp{}Execute the following commands:
\begin{itemize}
\item\asCode{cd ACE\fUS{}wrappers}
\item\exSp\asCode{export ACE\fUS{}ROOT=\$(pwd)}
\item\exSp\asCode{make clean \&\& make}
\end{itemize}
\item\exSp{}If the build is successful, execute the command `\asCode{sudo~sh}'
\item\exSp{}Execute the following commands within the new subshell:
\begin{itemize}
\item\asCode{export ACE\fUS{}ROOT=\$(pwd)}
\item\exSp\asCode{export DYLD\fUS{}LIBRARY\fUS{}PATH=/opt/m+m/lib:%
\$DYLD\fUS{}LIBRARY\fUS{}PATH}
\item\exSp\asCode{make install}
\item\exSp\asCode{exit}
\end{itemize}
\item\exSp{}Execute the command `\asCode{sudo ./after-install.sh}'; this removes some
unneeded files
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}ACE\fUS{}wrappers\textbackslash{}ACE\fUS{}%
wrappers\fUS{}vc12.sln}' with \asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building 32-bit, select the \asCode{Debug} :\ \asCode{Win32}
configuration instead
\item\exSp{}Clear out any older binary files via the menu item
`\asCode{Build \bigRightArrow{} Clean Solution}'
\item\exSp{}Build the Debug version via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Select the \asCode{Release} :\ \asCode{x64} configuration; if building 32-bit,
select the \asCode{Release} :\ \asCode{Win32} configuration instead
\item\exSp{}Clear out any older binary files via the menu item
`\asCode{Build \bigRightArrow{} Clean Solution}'
\item\exSp{}Build the Release version via the menu item
`\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Open the \asCode{System} Control Panel
\item\exSp{}Click on the \asCode{Advanced system settings} button
\item\exSp{}Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{}Select the \asCode{ACE\fUS{}ROOT} system variable and click on the
\asCode{Edit} button 
\item\exSp{}Edit the variable value to be
`\asCode{\textbf{devel}\textbackslash{}ACE\fUS{}wrappers}', where \asCode{\textbf{devel}}
is the directory containing the \mplusm{} source code, and click on the \asCode{OK} button
\item\exSp{}Select the \asCode{ACE\fUS{}INCLUDE\fUS{}DIR} system variable and click on
the \asCode{Edit} button 
\item\exSp{}Edit the variable value to be
`\asCode{\textbf{devel}\textbackslash{}ACE\fUS{}wrappers\textbackslash{}include}' and
click on the \asCode{OK} button
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
\mplusm{} can use the standard build of \textbf{ACE}, which can be installed via the
command:\\
\asCode{sudo apt-get install libace-dev}
\tertiaryEnd
\secondaryEnd
\secondaryStart{(Optional)~Building~\textbf{\yarp}}
\textbf{\yarp} (Yet Another Robot Platform) provides the connection management support
used within \mplusm{}; the files needed to compile and link with \yarp{} are installed as
part of the normal \mplusm{} installation procedure, so it's not necessary to rebuild
\yarp{}; the source code is provided in case there is an issue with the headers or
libraries.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{\textbf{devel}}
\item\exSp{}Execute the following commands:
\begin{itemize}
\item\asCode{cd yarp\fUS{}MPlusM}
\item\exSp\asCode{mkdir build}
\item\exSp\asCode{cd build}
\end{itemize}
\item\exSp{}Execute the command `\asCode{ccmake ..}'; this will open a graphical
interface to the makefile builder. If this is the first time that the command is executed
within a directory, the text `\asCode{EMPTY~CACHE}' will be displayed \longDash{} press
`\textbf{c}' to do the initial configuration; there may be some warnings for project
developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{}Press `\textbf{t}' to show more options
\item\exSp{}Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}RELEASE}' value to
\asCode{/opt/m+m/lib/libACE.dylib}; if the option is not visible, press
`\textbf{Control-D}' to go to the next page of options and `\textbf{Control-U}' to go to
the previous page of options
\item\exSp{}Change the `\textbf{ACE\fUS{}INCLUDE\fUS{}DIR}' value to
\asCode{/opt/m+m/include}
\item\exSp{}Press `\textbf{t}' to show fewer options
\item\exSp{}Change the `\textbf{CMAKE\fUS{}INSTALL\fUS{}PREFIX}' value to
\asCode{/opt/m+m}
\item\exSp{}Change any other options that you are interested in applying; it is
recommended that the option\\
`\textbf{ENABLE\fUS{}YARPRUN\fUS{}LOG}' should be enabled and the options
`\textbf{CREATE\fUS{}YMANAGER}' and\\
`\textbf{YARP\fUS{}USE\fUS{}READLINE}' should be disabled
\item\exSp{}Press `\textbf{c}' to configure the makefiles; there may be some CMake
warnings for project developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{}Press `\textbf{g}' to generate the makefiles; there may be some CMake
warnings for project developers, which can be cleared by pressing `\textbf{e}'
\item\exSp{}Execute the command `\asCode{cmake .}'; again, there will be some project
developer warnings, which can be safely ignored
\item\exSp{}Execute the command `\asCode{make clean \&\& make}'
\item\exSp{}Execute the command `\asCode{sudo ../after-build.sh}'; this corrects some
linking issues with \yarp{} caused by installing it in a non\longDash{}default location
\item\exSp{}Execute the command `\asCode{sudo make install}'
\item\exSp{}If desired, you can verify that \yarp{} was correctly built be executing the
command `\asCode{make~test}'
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Launch the \asCode{CMake} GUI application
\item\exSp{}Set the source code directory to `\asCode{\textbf{devel}/yarp\fUS{}MPlusM}',
where \asCode{\textbf{devel}} is the directory containing the \mplusm{} source code
\item\exSp{}Set the build directory to `\asCode{\textbf{devel}/yarp\fUS{}MPlusM}
\item\exSp{}Select the menu item `\asCode{File \bigRightArrow{} Delete Cache}'
\item\exSp{}Click on the `\asCode{Configure}' button; make sure that the generator
setting is for \asCode{Visual Studio 12} (or newer), with the \asCode{Win64} variant of
the generator and that `\asCode{Use default native compilers}' is selected; if building
for 32-bit, do not select the \asCode{Win64} variant
\item\exSp{}Click on the `\asCode{Finish}' button
\item\exSp{}Turn on the `\asCode{Advanced}' option once the configuration step completes
\item\exSp{}Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}DEBUG}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers/lib/ACEd.lib}
\item\exSp{}Change the `\textbf{ACE\fUS{}ACE\fUS{}LIBRARY\fUS{}RELEASE}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers/lib/ACE.lib}
\item\exSp{}Change the `\textbf{ACE\fUS{}INCLUDE\fUS{}DIR}' value to
\asCode{\textbf{devel}/ACE\fUS{}wrappers}
\item\exSp{}Change the `\textbf{CMAKE\fUS{}INSTALL\fUS{}PREFIX}' value to
\asCode{C:/Program Files/m+m}
\item\exSp{}Turn off the `\asCode{Advanced}' option
\item\exSp{}Turn off the `\asCode{CREATE\fUS{}YMANAGER}' option
\item\exSp{}Click on the `\asCode{Configure}' button
\item\exSp{}Click on the `\asCode{Generate}' button
\item\exSp{}Exit from the \asCode{CMake} GUI application
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}yarp\fUS{}MPlusM\textbackslash{}YARP.sln}' with
\asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building for 32-bit, select the \asCode{Debug} :\ \asCode{Win32}
configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Open the \asCode{Batch Build} panel via the menu item
`\asCode{Build \bigRightArrow{} Batch Build\textellipsis}'
\item\exSp{}Click on the `\asCode{Deselect All}' button
\item\exSp{}Select the `\asCode{INSTALL}' project and the `\asCode{Release|x64}'
configuration by clicking on the corresponding `\asCode{Build}' checkbox, or the
`\asCode{Release|Win32}' configuration if building for 32-bit
\item\exSp{}Click on the `\asCode{Build}' button to build and install the Release version
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Open the \asCode{System} Control Panel
\item\exSp{}Click on the \asCode{Advanced system settings} button
\item\exSp{}Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{}Select the \asCode{YARP\fUS{}DIR} system variable and click on the
\asCode{Edit} button 
\item\exSp{}Edit the variable value to be
`\asCode{\textbf{devel}\textbackslash{}yarp\fUS{}MPlusM}', and click on the \asCode{OK}
button
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\item\exSp{}If desired, you can verify that \yarp{} was correctly built by executing the
command `\asCode{yarp~where}' in a Command Prompt window; it should either report where a
\yarp{} server is running or indicate how to start one up
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{(Optional, used with \textit{\MMMU})~Building~\textbf{OGDF}}
\textbf{OGDF} (Open Graph Drawing Framework) provides the tools to layout graphs for the
\MMMU{} application; the files needed to compile and link with OGDF are installed as part
of the normal \mplusm{} installation procedure, so it's not necessary to rebuild OGDF; the
source code is provided in case there is an issue with the headers or libraries.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{\textbf{devel}}
\item\exSp{}Execute the following commands:
\begin{itemize}
\item\asCode{cd OGDF}
\item\exSp\asCode{python makeMakefile.py}
\item\exSp\asCode{make cleanrelease \&\& make release}
\item\exSp\asCode{sudo make install}
\end{itemize}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Open a Command Prompt window and move to the directory containing the \mplusm{}
source code, \asCode{\textbf{devel}}
\item\exSp{}Execute the following commands:
\begin{itemize}
\item\asCode{cd OGDF}
\item\exSp\asCode{python makeVCXProj.py}
\end{itemize}
\item\exSp{}Close the Command Prompt window
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}OGDF\textbackslash{}ogdf.sln}' with
\asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building for 32-bit, select the \asCode{Debug} :\ \asCode{Win32} instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Select the \asCode{Release} :\ \asCode{x64} configuration; if building for
32-bit, select the \asCode{Release} :\ \asCode{Win32} configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Open the \asCode{System} Control Panel
\item\exSp{}Click on the \asCode{Advanced system settings} button
\item\exSp{}Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{}Select the \asCode{OGDF} system variable and click on the \asCode{Edit}
button 
\item\exSp{}Edit the variable value to be `\asCode{\textbf{devel}\textbackslash{}OGDF}',
and click on the \asCode{OK} button
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{(Optional)~Building~\textbf{SpiderMonkey}}
\textbf{SpiderMonkey} is the \compLang{JavaScript} engine used with the JavaScript Filter
service of \mplusm{}; the files needed to compile and link with \textbf{SpiderMonkey} are
installed as part of the normal \mplusm{} installation procedure, so it's not necessary to
rebuild \textbf{SpiderMonkey}.
The source files are not provided with the \asCode{Developer} package, but can be obtained
via the instructions on the web\longDash{}page
\companyReference{https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/%
Getting\_SpiderMonkey\_source\_code}%
{\textbf{SpiderMonkey} source code}, as \mplusm{} does not use a modified version of
\textbf{SpiderMonkey} and does not depend on a particular version \longDash{} other than
it must be at least \textbf{SpiderMonkey} \textbf{39}.
\tertiaryStart{Building~on~\osx}
\newcommand{\spiderversion}{47a1}%
Note that the build process for \textbf{SpiderMonkey} is currently `broken', necessitating
that manual steps be performed that should be part of the `make install' process.
\begin{itemize}
\item Select a directory to hold the \textbf{SpiderMonkey} source code, which will be
referred to as `\asCode{spidermonkey}'; this can be a sister directory to the
\asCode{\textbf{devel}} directory, but it need not be
\item\exSp{}On the command\longDash{}line, execute the following commands:
\begin{itemize}
\item\asCode{git clone https://github.com/mozilla/gecko-dev.git \textbf{spidermonkey}}
\item\exSp\asCode{cd \textbf{spidermonkey}}
\item\exSp\asCode{cd js/src}
\item\exSp\asCode{autoconf213}
\item\exSp\asCode{mkdir \fUS{}obj\fUS}
\item\exSp\asCode{cd \fUS{}obj\fUS}
\item\exSp\asCode{../configure {-}{-}prefix=/opt/m+m/spidermonkey {-}{-}with-system-icu
\textbackslash\\
{-}{-}enable-release {-}{-}enable-more-deterministic}
\item\exSp\asCode{make clean \&\& make}
\item\exSp\asCode{sudo make install}
\item\exSp\asCode{sudo cp dist/bin/libmozglue.dylib /opt/m+m/spidermonkey/lib}
\item\exSp\asCode{sudo install\fUS{}name\fUS{}tool -change
"@executable\fUS{}path/libmozglue.dylib" \textbackslash\\
"@rpath/libmozglue.dylib" /opt/m+m/spidermonkey/lib/libmozjs-\spiderversion.dylib}; note
the single dash for `\asCode{-change}'
\end{itemize}
\item\exSp{}On the command\longDash{}line, move to the directory containing the \mplusm{}
source code, \asCode{\textbf{devel}}
\item\exSp{}Execute the command `\asCode{sudo Core\fUS{}MPlusM/replace-links.sh
\textbackslash\\
/opt/m+m/spidermonkey/include/mozjs-\spiderversion}'; this replaces symbolic links in the
header directories for \textbf{SpiderMonkey} with the original items, so that it is safe
to distribute the resulting directories
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
The most recent version of \textbf{SpiderMonkey} can be built on \win{} with the
`\asCode{Visual Studio Community 2013}' version of \asCode{Visual Studio} - there are
no scripts that support newer versions than this, and older versions are not supported at
all, even though the scripts exist.
\begin{itemize}
\item Download and install the \asCode{MozillaBuild} package, located at
\asCode{https://wiki.mozilla.org/MozillaBuild};
there is a \win{} installer available at\\
\asCode{ftp.mozilla.org/pub/mozilla.org/mozilla/libraries/win32/MozillaBuildSetup-%
Latest.exe}
\item\exSp{}Select a directory to hold the \textbf{SpiderMonkey} source code, which will
be referred to as `\asCode{spidermonkey}'; this can be a sister directory to the
\asCode{\textbf{devel}} directory, but it need not be
\item\exSp{}If \asCode{git} is available as a command\longDash{}tool on the system, do the
following:
\begin{itemize}
\item Open a Command Prompt window, running as Administrator
\item\exSp{}Execute the command\\
`\asCode{git clone https://github.com/mozilla/gecko-dev.git \textbf{spidermonkey}}'
\end{itemize}
\item\exSp{}if \asCode{git} is not available as a command\longDash{}tool on the system, do
the following:
\begin{itemize}
\item\exSp{}Use \asCode{SourceTree} to clone the repository
`\asCode{https://github.com/mozilla/gecko-dev.git}' into the directory
`\asCode{\textbf{spidermonkey}}'
\item\exSp{}Open a Command Prompt window, running as Administrator
\end{itemize}
\item\exSp{}In the Command Prompt Window, move to the directory where the
\asCode{MozillaBuild} environment was installed
\item\exSp{}Execute the command `\asCode{start-shell-msvc2015-x64.bat}'; this will launch
an environment in which \textbf{SpiderMonkey} can be built; note that the initial
directory will be the `home' directory of the user, on the system drive
\item\exSp{}If necessary, switch to the drive containing \asCode{\textbf{spidermonkey}},
using the `\asCode{cd /\textbf{drive-letter}/}', replacing `\textbf{drive-letter}' with
the lower-case form of the drive letter for the drive containing
\asCode{\textbf{spidermonkey}}; note that the path to the \textbf{SpiderMonkey} sources
must not be `\asCode{C:\textbackslash{}spidermonkey}'
\item\exSp{}Execute the following commands:
\begin{itemize}
\item\asCode{cd \textbf{spidermonkey}}
\item\exSp\asCode{cd js/src}
\item\exSp\asCode{/usr/local/bin/autoconf-2.13}
\item\exSp\asCode{mkdir \fUS{}obj\fUS}
\item\exSp\asCode{cd \fUS{}obj\fUS}
\end{itemize}
\item\exSp{}Execute the command `\asCode{../configure {-}{-}enable-release
{-}{-}enable-more-deterministic\\
{-}{-}enable-build-nspr {-}{-}prefix=c:/spidermonkey {-}{-}target=x86\fUS{}64-pc-mingw32\\
{-}{-}host=x86\fUS{}64-pc-mingw32}'; note that the build environment has problems with the
standard \win{} paths for program files, so the target directory is not the final one
\item\exSp{}Execute the following commands:
\begin{itemize}
\item \asCode{mozmake}
\item\exSp\asCode{mozmake install}
\item\exSp\asCode{cp dist/bin/icu*.dll /c/spidermonkey/lib}
\item\exSp\asCode{cp dist/bin/mozglue.dll /c/spidermonkey/lib}
\item\exSp\asCode{cp dist/bin/nspr4.dll /c/spidermonkey/lib}
\item\exSp\asCode{cp dist/bin/plds4.dll /c/spidermonkey/lib}
\item\exSp\asCode{cp dist/bin/plc4.dll /c/spidermonkey/lib}
\item\exSp\asCode{cd /c/}
\item\exSp\asCode{cd Program\textbackslash{} Files}
\item\exSp\asCode{cd m+m}
\item\exSp\asCode{rm -rf spidermonkey}
\item\exSp\asCode{mv /c/spidermonkey .}
\item\exSp\asCode{exit}
\end{itemize}
\item\exSp{}Close the Command Prompt window
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{(Optional)~Building~\textbf{\ECL}}
\textbf{\ECL} (\textit{E}mbeddable \textit{C}ommon \textit{L}isp) is the
\compLang{Common Lisp} engine used with the Common Lisp Filter service of \mplusm{}; the
files needed to compile and link with \textbf{\ECL} are installed as part of the normal
\mplusm{} installation procedure, so it's not necessary to rebuild \textbf{\ECL}.
The source files are not provided with the \asCode{Developer} package, but can be obtained
via the instructions on the web\longDash{}page
\companyReference{https://common-lisp.net/project/ecl/}{\textbf{\ECL} source code}, as
\mplusm{} does not use a modified version of \textbf{\ECL} and does not depend on a
particular version \longDash{} other than it must be at least \textbf{15.3.7}.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item Select a directory to hold the \textbf{\ECL} source code, which will be referred to
as `\asCode{ecl}'; this can be a sister directory to the \asCode{\textbf{devel}}
directory, but it need not be
\item\exSp{}On the command\longDash{}line, execute the following commands:
\begin{itemize}
\item\asCode{git clone https://gitlab.com/embeddable-common-lisp/ecl.git \textbf{ecl}}
\item\exSp\asCode{cd \textbf{ecl}}
\item\exSp\asCode{./configure {-}{-}prefix=/opt/m+m {-}{-}enable-gengc {-}{-}with-cxx
{-}{-}with-dffi\\
{-}{-}enable-shared {-}{-}disable-threads {-}{-}enable-unicode {-}{-}enable-longdouble\\
{-}{-}with-tcp {-}{-}with-clos-streams {-}{-}with-cmp {-}{-}enable-boehm}
\item\exSp\asCode{make clean \&\& make}
\item\exSp\asCode{sudo make install}
\end{itemize}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
Note that, due to incompatibilities between some type declarations in \textbf{\ECL} and in
the \win{} SDK, it is currently not possible to build the Common Lisp Filter service on
\win, so there's no need to build \textbf{\ECL}.
Instead, do the following:
\begin{itemize}
\item Download the
\companyReference{https://common-lisp.net/project/ecl/files/%
ecl-16.0.0-msvc-win32-installer.exe}
{\win{} binary distribution installer}
\item\exSp{}Run the installer, and select a directory to contain the \ECL{} files
\item\exSp{}Copy the new directory to the directory
\asCode{C:\textbackslash{}Program Files (x86)}
\item\exSp{}Rename the copy to \asCode{ecl\fUS{}src}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{(Optional)~Building~\textbf{ActiveMQ-CPP}}
\textbf{ActiveMQ-CPP} is the \emph{ActiveMQ} engine used with the SendToMQ output service;
the files needed to compile and link with \textbf{ActiveMQ-CPP} are installed as part of
the normal \mplusm{} installation procedure, so it's not necessary to rebuild
\textbf{ActiveMQ-CPP}.
The source files are not provided with the \asCode{Developer} package, but can be obtained
via the instructions on the web\longDash{}page
\companyReference{http://activemq.apache.org/cms/activemq-cpp-391-release.html}%
{\textbf{ActiveMQ-CPP} source code}, as \mplusm{} does not use a modified version of
\textbf{ActiveMQ-CPP} and does not depend on a particular version \longDash{} other than
it must be at least \textbf{ActiveMQ-CPP} \textbf{3.8}.\\

Make sure that all the dependencies for \textbf{ActiveMQ-CPP} are installed before
building \textbf{ActiveMQ-CPP}, as described on the web\longDash{}page
\companyReference{http://activemq.apache.org/cms/building.html}%
{Building \textbf{ActiveMQ}}.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item Select a directory to hold the \textbf{ActiveMQ-CPP} source code, which will be
referred to as `\asCode{ActiveMQ}'; this can be a sister directory to the
\asCode{\textbf{devel}} directory, but it need not be
\item\exSp{}On the command\longDash{}line, execute the following commands:
\begin{itemize}
\item\asCode{git clone https://git-wip-us.apache.org/repos/asf/activemq-cpp.git
\textbf{ActiveMQ}}
\item\exSp\asCode{cd \textbf{ActiveMQ}}
\item\exSp\asCode{cd activemq-cpp}
\item\exSp\asCode{export CFLAGS="-arch i386 -arch x86\fUS{}64"}
\item\exSp\asCode{export CXXFLAGS="-arch i386 -arch x86\fUS{}64 -std=c++11
-stdlib=libstdc++"}
\item\exSp\asCode{./autogen.sh}
\item\exSp\asCode{./configure {-}{-}prefix=/opt/m+m}
\item\exSp\asCode{make clean \&\& make}
\item\exSp\asCode{sudo make install}
\end{itemize}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Select a directory to hold the \textbf{Apache Portable Runtime} source code, which
will be referred to as `\asCode{APR}'; this can be a sister directory to the
\asCode{\textbf{devel}} directory, but it need not be
\item\exSp{}Download the recommended versions of \textbf{APR}, \textbf{APR-util} and
\textbf{APR-iconv} into \asCode{\textbf{APR}}
\item\exSp{}\asCode{unzip} the \textbf{ZIP} archive files in the directory
\asCode{\textbf{APR}}; the result will be three directories, \asCode{apr-\#.\#.\#},\\
\asCode{apr-iconv-\#.\#.\#} and \asCode{apr-util-\#.\#.\#}, where `\asCode{\#.\#.\#}'
represents the version number of each piece of \textbf{APR}
\item Launch the \asCode{CMake} GUI application
\item\exSp{}Set the source code directory to `\asCode{\textbf{APR}/apr-\#.\#.\#}'
\item\exSp{}Set the build directory to `\asCode{\textbf{APR}/apr-\#.\#.\#}'
\item\exSp{}Select the menu item `\asCode{File \bigRightArrow{} Delete Cache}'
\item\exSp{}Click on the `\asCode{Configure}' button; make sure that the generator
setting is for \asCode{Visual Studio 12} (or newer), with the \asCode{Win64} variant of
the generator and that `\asCode{Use default native compilers}' is selected; if building
for 32-bit, do not select the \asCode{Win64} variant
\item\exSp{}Click on the `\asCode{Finish}' button
\item\exSp{}Click on the `\asCode{Configure}' button
\item\exSp{}Change the `\textbf{CMAKE\fUS{}INSTALL\fUS{}PREFIX}' value to
\asCode{C:/Program Files/m+m}
\item\exSp{}Click on the `\asCode{Generate}' button
\item\exSp{}Exit from the \asCode{CMake} GUI application
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the file
\asCode{\textbf{APR}\textbackslash{}apr-\#.\#.\#\textbackslash{}apr.sln} with 
\asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building for 32-bit, select the \asCode{Debug} :\ \asCode{Win32}
configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Open the \asCode{Batch Build} panel via the menu item
`\asCode{Build \bigRightArrow{} Batch Build\textellipsis}'
\item\exSp{}Click on the `\asCode{Deselect All}' button
\item\exSp{}Select the `\asCode{INSTALL}' project and the `\asCode{Release|x64}'
configuration by clicking on the corresponding `\asCode{Build}' checkbox, or the
`\asCode{Release|Win32} configuration if building for 32-bit
\item\exSp{}Click on the `\asCode{Build}' button to build and install the Release
version
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Select a directory to hold the \textbf{ActiveMQ-CPP} source code, which will
be referred to as `\asCode{ActiveMQ}'; this can be a sister directory to the
\asCode{\textbf{devel}} directory, but it need not be
\item\exSp{}If \asCode{git} is available as a command\longDash{}tool on the system, do the
following:
\begin{itemize}
\item Open a Command Prompt window
\item\exSp{}Execute the command:
\item `\asCode{git clone https://git-wip-us.apache.org/repos/asf/activemq-cpp.git
\textbf{ActiveMQ}}'
\item\exSp{}Close the Command Prompt window
\end{itemize}
\item\exSp{}if \asCode{git} is not available as a command\longDash{}tool on the system, do
the following:
\begin{itemize}
\item Use \asCode{SourceTree} to clone the repository\\
`\asCode{https://git-wip-us.apache.org/repos/asf/activemq-cpp.git}' into the directory
`\asCode{\textbf{ActiveMQ}}'
\end{itemize}
\item\exSp{}Open the directory \asCode{C:\textbackslash{}Program
Files\textbackslash{}m+m\textbackslash{}include} in the File Explorer
\item\exSp{}Move the directories \asCode{activemq}, \asCode{cms} and \asCode{decaf} to the
trash;
if the previously\longDash{}installed header files conflict with the ones retrieved using
\asCode{git}, building \textbf{ActiveMQ-CPP} will likely fail
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the file
\asCode{\textbf{ActiveMQ}\textbackslash{}activemq-cpp\textbackslash{}vs2010-build%
\textbackslash{}active-mq.sln} with \asCode{Visual Studio}, allowing it to upgrade the
projects
\item\exSp{}Open the \asCode{Configuration Manager} panel via the menu item
`\asCode{Build \bigRightArrow{} Configuration Manager\textellipsis}'
\item\exSp{}Disable the building of all but the `\asCode{activemq-cpp}' project by turning
off the \asCode{Build} checkboxes for the other projects
\item\exSp{}Click on the \asCode{Close} to close the \asCode{Configuration Manager} panel
\item\exSp{}Select the `\asCode{activemq-cpp}' row in the \asCode{Solution Explorer} and
open the \asCode{activemq-cpp Property Pages} panel via the menu item
`\asCode{Project \bigRightArrow{} Project Properties}'
\item\exSp{}Select the \asCode{All Configurations} configuration from the top-left
combo-box and the \asCode{x64} platform from the top-right combo-box, unless building for
32-bit, in wich case the \asCode{Win32} platform should be selected
\item\exSp{}Expand the \asCode{Configuration Properties} item in the left-hand panel
\item\exSp{}Expand the \asCode{C/C++} item
\item\exSp{}Select the \asCode{General} item
\item\exSp{}In the middle panel, change the \asCode{Debug Information Format} setting to
`\asCode{Program Database (/Zi)}'
\item\exSp{}Select the \asCode{Additional Include Directories} item in the middle panel
\item\exSp{}Click on the `expand' button to the right of the list of paths \longDash{} the
button with a `v'
\item\exSp{}Select the `\asCode{<Edit\textellipsis{}>}' item from the popup menu, which
will open the `\asCode{Additional Include Directories}' panel
\item\exSp{}Click on the `add' button, which is the fourth button from the right on the
top, just below the title bar for the panel \longDash{} it is a button with an image of a
folder with an asterisk on its top-left corner
\item\exSp{}In the blank row that appears, enter the text
`\asCode{C:\textbackslash{}Program Files\textbackslash{}m+m\textbackslash{}include}',
without quotes
\item\exSp{}Click on the \asCode{OK} button on the bottom row of the
\asCode{Additional Include Directories} panel
\item\exSp{}Click on the \asCode{OK} button on the bottom row of the
\asCode{activemq-cpp Property Pages} panel
\item\exSp{}Select the \asCode{Debug} :\ \asCode{x64} configuration; if building 32-bit,
select the \asCode{Debug} :\ \asCode{Win32} configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Select the \asCode{Release} :\ \asCode{x64} configuration; if building 32-bit,
select the \asCode{Release} :\ \asCode{Win32} configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Open a Command Prompt window, running as Administrator
\item\exSp{}Execute the following commands
\begin{itemize}
\item\asCode{cd \textbf{ActiveMQ}\textbackslash{}activemq-cpp}
\item\exSp\asCode{set PREFIX="C:\textbackslash{}Program Files\textbackslash{}m+m"}
\item\exSp\asCode{copy vs2010-build\textbackslash{}x64\textbackslash{}Release%
\textbackslash{}libactivemq-cpp.lib \%PREFIX\%\textbackslash{}lib}
\item\exSp\asCode{xcopy src\textbackslash{}main\textbackslash{}*.h
\%PREFIX\%\textbackslash{}include /s /d}
\end{itemize}
\item\exSp{}Close the Command Prompt window
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{Building~Core~\mplusm}
If you need to update the version number of \mplusm, refer to the
\appendixRef{UpdatingVersionNumber}{Updating~the~Version~Number} appendix for what files
need to be modified.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item On the command\longDash{}line, move to the directory containing the \mplusm{} source
code, \asCode{\textbf{devel}}
\item\exSp{}Execute the command `\asCode{cd Core\fUS{}MPlusM}'
\item\exSp{}Execute the command `\asCode{ccmake .}'; this will open a graphical interface
to the makefile builder. If this is the first time that the command is executed within a
directory, the text `\asCode{EMPTY~CACHE}' will be displayed \longDash{} press
`\textbf{c}' to do the initial configuration
\item\exSp{}Change the `\textbf{CMAKE\fUS{}BUILD\fUS{}TYPE}' to \asCode{Release}
\item\exSp{}Change any other options that you are interested in applying; the default
options minimize the amount of text that is output when \mplusm{} command\longDash{}line
tools are executed
\item\exSp{}Press `\textbf{c}' to configure the makefiles
\item\exSp{}Press `\textbf{g}' to generate the makefiles
\item\exSp{}Execute the command `\asCode{cmake .}'
\item\exSp{}Execute the command `\asCode{make clean \&\& make}'
\item\exSp{}To run the unit tests for \mplusm, do the following:
\begin{itemize}
\item Execute the command `\asCode{ps | grep yarp | grep -v grep}'; if there is a line
similar to `\asCode{30339 ttys004 0:00.01 yarp server\textellipsis}' then the \yarp{}
server is already running
\item\exSp{}If the \yarp{} server is not already running, start a separate terminal
session and launch the \yarp{} server by executing the command `\asCode{yarp~server}'
\item\exSp{}If you see something similar to the following, there is another process using
the network port that \yarp{} uses by default:
\outputBegin
\begin{verbatim}
__   __ _    ____  ____  
\ \ / // \  |  _ \|  _ \ 
 \ V // _ \ | |_) | |_) |
  | |/ ___ \|  _ <|  __/ 
  |_/_/   \_\_| \_\_|    

Call with --help for information on available options
Options can be set on command line or in /Users/M_M/Library/Application
       Support/yarp/config/yarpserver.conf
Using port database: :memory:
Using subscription database: :memory:
IP address: default
Port number: 10000
yarp: Port /root failed to activate at tcp://10.0.1.2:10000 (address conflict)
Name server failed to open
\end{verbatim}
\outputEnd
\item\exSp{}If you see the above error message, you will need to clear the \yarp{}
configuration by issuing the command `\asCode{yarp~conf~{-}{-}clean}'.
\item\exSp{}Once the \yarp{} configuration is cleared, execute the command
`\asCode{yarp server \longDash{}socket 11223 \longDash{}write}' to start the \yarp{}
server, where `\asCode{11223}' is an arbitrary number greater than 1024.
\item\exSp{}In the terminal session where \mplusm{} was built, execute the command
`\asCode{make~test}'
\item\exSp{}When the test completes, close the new terminal session if one was started
for the test
\end{itemize}
\item\exSp{}To install the freshly\longDash{}built \mplusm{} files, execute the command
`\asCode{sudo~make~install}'
\item\exSp{}To confirm the normal operation of \mplusm, do the following:
\begin{itemize}
\item Check that the \yarp{} server is running and start it if it is not, using the
instructions above
\item\exSp{}Execute the command `\asCode{m+mRegistryService \&}'; this will launch the
\serviceNameR[\RS]{RegistryService} in the background and return the \textbf{PID} that can
be used to halt it later
\item\exSp{}Execute the command `\asCode{m+mServiceList}; this should display the
properties of the \serviceNameR[\RS]{RegistryService}
\item\exSp{}If you wish to halt the \serviceNameR[\RS]{RegistryService}, execute the
command `\asCode{halt -s HUP} \#\#\#\#', where ``\#\#\#\#'' is the \textbf{PID} that was
returned when the \serviceNameR[\RS]{RegistryService} was launched
\end{itemize}
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Launch the \asCode{CMake} GUI application
\item\exSp{}Set the source code directory to
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM}', where \asCode{\textbf{devel}}
is the directory containing the \mplusm{} source code
\item\exSp{}Set the build directory to
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM}'
\item\exSp{}Select the menu item `\asCode{File \bigRightArrow{} Delete Cache}'
\item\exSp{}Click on the `\asCode{Configure}' button; make sure that the generator
setting is for \asCode{Visual Studio 12} (or newer), with the \asCode{Win64} variant of
the generator and that `\asCode{Use default native compilers}' is selected; if building
for 32-bit, do not select the \asCode{Win64} variant
\item\exSp{}Click on the `\asCode{Finish}' button
\item\exSp{}Click on the `\asCode{Configure}' button once the configuration step
completes
\item\exSp{}If building for 32-bit, make sure that the checkbox \asCode{WIN64} is off
\longDash{} it is normally on
\item\exSp{}Click on the `\asCode{Generate}' button
\item\exSp{}Exit from the \asCode{CMake} GUI application
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM\textbackslash{}m+m.sln}' with
\asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building 32-bit, select the \asCode{Debug} :\ \asCode{Win32}
configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Open the \asCode{Batch Build} panel via the menu item
`\asCode{Build \bigRightArrow{} Batch Build\textellipsis}'
\item\exSp{}Click on the `\asCode{Deselect All}' button
\item\exSp{}Select the `\asCode{INSTALL}' Project and the `\asCode{Release|x64}'
configuration by clicking on the corresponding `\asCode{Build}' checkbox, or the
`\asCode{Release|Win32}' configuration if building for 32-bit
\item\exSp{}Click on the `\asCode{Build}' button to build and install the Release
version; note that this will fail the first time, since it attempts to install
\textit{\MMMU}, which has not been built yet
\item\exSp{}Exit from \asCode{Visual Studio}
\item\exSp{}Open the \asCode{System} Control Panel
\item\exSp{}Click on the \asCode{Advanced system settings} button
\item\exSp{}Click on the \asCode{Environment Variables} button on the \asCode{Advanced}
tab
\item\exSp{}Select the \asCode{MPlusM\fUS{}ROOT} system variable and click on the
\asCode{Edit} button 
\item\exSp{}Edit the variable value to be
`\asCode{C:\textbackslash{}Program Files\textbackslash{}m+m\textbackslash{}include}', and
click on the \asCode{OK} button
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{Environment Variables}
panel
\item\exSp{}Click on the \asCode{OK} button to close the \asCode{System Properties}
window
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{Building~\textit{\MMMU}}
\textit{\MMMU} is not built from the command\longDash{}line but, rather, from the IDE.
\tertiaryStart{Building~on~\osx}
\begin{itemize}
\item In Finder, open the directory containing the \mplusm{} source code,
\asCode{\textbf{devel}}
\item\exSp{}Open the directory `\asCode{Utilities\fUS{}mm\fUS{}manager}' within
\asCode{\textbf{devel}}
\item\exSp{}Open the directory `\asCode{Builds/MacOSX}'
\item\exSp{}Open the file `\asCode{m+m manager.xcodeproj}' with \asCode{Xcode}
\item\exSp{}Within \asCode{Xcode}, select either the `\asCode{m+m manager Debug}' or
`\asCode{m+m manager Release}' Scheme
\item\exSp{}Perform the menu item `\asCode{Product \bigRightArrow{} Build}' or
`\asCode{Product \bigRightArrow{} Run}'
\item\exSp{}To create an executable that can be placed in the `\asCode{/Applications}'
folder, do an `\asCode{Archive \bigRightArrow{} Export \bigRightArrow{} Export as a Mac
Application}'
and place the generated application in a writable location, like your home directory
\item\exSp{}Exit from \asCode{Xcode}
\item\exSp{}If the generated application is named \asCode{m+m manager Debug}, rename
it to \asCode{m+m manager} and, if it is named \asCode{m+m manager Release},
rename it to \asCode{m+m manager}
\item\exSp{}Copy the \asCode{m+m manager} application to the \asCode{/Applications}
directory
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\win}
\begin{itemize}
\item Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}Utilities\fUS{}mm\fUS{}manager\textbackslash{}%
Builds\textbackslash{}VisualStudio2015\textbackslash{}m+m manager.sln}' with
\asCode{Visual Studio}
\item\exSp{}Within \asCode{Visual Studio}, select the \asCode{Debug} :\ \asCode{x64}
configuration; if building 32-bit, select the \asCode{Debug} :\ \asCode{Win32}
configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\item\exSp{}Select the \asCode{Release} :\ \asCode{x64} configuration; if building 32-bit,
select the \asCode{Release} :\ \asCode{Win32} configuration instead
\item\exSp{}Build via the menu item `\asCode{Build \bigRightArrow{} Build Solution}'
\end{itemize}
\tertiaryEnd
\tertiaryStart{Building~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\secondaryStart{Creating~the~Distribution~Packages}
The distribution packages are standalone files that can be used to create a complete
\mplusm{} installation.
\tertiaryStart{Creating~on~\osx}
\begin{itemize}
\item If any source files have been modified in the `\asCode{Core\fUS{}MPlusM}' or
`\asCode{Utilities\fUS{}mm\fUS{}manager}' directories, commit the changes to the
\asCode{git} repositories
\item\exSp{}Download the latest versions of the \asCode{git} repositories as \asCode{ZIP}
archive files, to make sure that the generated distribution package is consistent
\item\exSp{}Copy the downloaded \asCode{ZIP} archive files to the directory containing
the \mplusm{} source code, \asCode{\textbf{devel}}; the archives\\
\asCode{ACE\fUS{}wrappers.zip}, \asCode{Core\fUS{}MPlusM-master.zip},
\asCode{JUCE.zip}, \asCode{OGDF.zip},\\
\asCode{Utilities\fUS{}mm\fUS{}manager-master.zip} and \asCode{yarp\fUS{}MPlusM.zip} must
all be present in the \asCode{\textbf{devel}} directory in order to construct the
distribution packages successfully
\item\exSp{}Launch the \asCode{Packages} GUI tool
\item\exSp{}Open the \asCode{Developer} file, which is located in the
\asCode{Core\fUS{}MPlusM/Packages/Developer} directory within the \asCode{\textbf{devel}}
directory
\item\exSp{}Perform the menu item \asCode{Build \bigRightArrow{} Clean\textellipsis}
\item\exSp{}Perform the menu item \asCode{Build \bigRightArrow{} Build}
\item\exSp{}Open the \asCode{m+m} file, which is located in the
\asCode{Core\fUS{}MPlusM/Packages} directory
\item\exSp{}Perform the menu item \asCode{Build \bigRightArrow{} Clean\textellipsis}
\item\exSp{}Perform the menu item \asCode{Build \bigRightArrow{} Build}
\item\exSp{}The distribution package is the \asCode{m+m.pkg} file located in the
\asCode{Core\fUS{}MPlusM/Packages/build} directory
\end{itemize}
\tertiaryEnd
\tertiaryStart{Creating~on~\win}
\begin{itemize}
\item Make sure to update the date recorded in the last line of the \asCode{license.txt}
file, located in the `\asCode{Core\fUS{}MPlusM}' directory
\item\exSp{}Commit the changes for the `\asCode{Core\fUS{}MPlusM}' directory to the
\asCode{git} repository
\item\exSp{}If any source files have been modified in the
`\asCode{Utilities\fUS{}mm\fUS{}manager}' directory, commit the changes to the
\asCode{git} repository
\item\exSp{}Download the latest versions of the \asCode{git} repositories as \asCode{ZIP}
archive files, to make sure that the generated distribution package is consistent
\item\exSp{}Copy the downloaded \asCode{ZIP} archive files to the directory
`asCode{archives}' within the directory containing the \mplusm{} source code,
\asCode{\textbf{devel}}; the archives \asCode{ACE\fUS{}wrappers.zip},
\asCode{Core\fUS{}MPlusM-master.zip}, \asCode{JUCE.zip},\\
\asCode{OGDF.zip}, \asCode{Utilities\fUS{}mm\fUS{}manager-master.zip} and
\asCode{yarp\fUS{}MPlusM.zip} must all be present in the\\
\asCode{\textbf{devel}\textbackslash{}archives} directory in order to construct the
distribution packages successfully
\item\exSp{}Launch \asCode{Visual Studio}, running as Administrator
\item\exSp{}Open the project file
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM\textbackslash{}m+m.sln}' with
\asCode{Visual Studio}
\item\exSp{}Open the \asCode{Batch Build} panel via the menu item
`\asCode{Build \bigRightArrow{} Batch Build\textellipsis}'
\item\exSp{}Click on the `\asCode{Deselect All}' button
\item\exSp{}Select the `\asCode{INSTALL}' Project and the `\asCode{Release|x64}'
configuration by clicking on the corresponding `\asCode{Build}' checkbox, or the
`\asCode{Release|Win32}' configuration if building for 32-bit
\item\exSp{}Select the `\asCode{PACKAGE}' project and the `\asCode{Release|x64}'
configuration by clicking on the corresponding `\asCode{Build}' checkbox, or the
`\asCode{Release|Win32}' configuration for 32-bit; the only other checkbox that should be
on is the `\asCode{INSTALL}' project and the `\asCode{Release|x64}' (or
`\asCode{Release|Win32}' if building for 32-bit) configuration
\item\exSp{}Click on the `\asCode{Build}' button to install the Release version and create
the distribution package
\item\exSp{}The distribution package is the \asCode{m+m-\MMVn-win64.exe} (or
\asCode{m+m-\MMVn-x86.exe}, if building for 32-bit) file located in the
`\asCode{\textbf{devel}\textbackslash{}Core\fUS{}MPlusM}' directory
\end{itemize}
\tertiaryEnd
\tertiaryStart{Creating~on~\linux}
TBD
\tertiaryEnd
\secondaryEnd
\appendixEnd{}
